<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Container Code Detection</title>
</head>
<body>
    <h2>Upload an Image for Container Code Detection</h2>
    <form id="upload-form" enctype="multipart/form-data">
        <input type="file" name="image" id="image-input" accept="image/*" required>
        <button type="submit">Detect</button>
    </form>
    <div id="result" style="margin-top:20px;">
        <h3 id="code-text"></h3>
        <img id="result-img" style="max-width:500px; display:none;" />
    </div>
    <script>
        document.getElementById('upload-form').onsubmit = async function(e) {
            e.preventDefault();
            const formData = new FormData();
            const fileInput = document.getElementById('image-input');
            formData.append('image', fileInput.files[0]);
            const response = await fetch('/detect', { method: 'POST', body: formData });
            const code = response.headers.get('codes');
            const blob = await response.blob();
            const imgUrl = URL.createObjectURL(blob);
            document.getElementById('result-img').src = imgUrl;
            document.getElementById('result-img').style.display = 'block';
            document.getElementById('code-text').innerText = 'Detected Code: ' + code;
        }
    </script>
</body>
</html>